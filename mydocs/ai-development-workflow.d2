# AI-Powered Dashboard Development Workflow
# Clean, readable architecture for Observable Framework + Telepresence + AI tools

direction: down

# Optimized layout for laptop screens - more spacing for readability
vars: {
  d2-config: {
    layout-engine: elk
  }
}

# Apple Keynote inspired styling - clean and minimal
classes: {
  laptop: {
    style.fill: "#F8F9FA"
    style.font-color: "#1D1D1F" 
    style.border-radius: 16
    style.font-size: 32
    style.bold: true
    style.stroke: "#D1D1D6"
    style.stroke-width: 2
    style.shadow: true
  }
  ai: {
    style.fill: "#5856D6"
    style.font-color: "#FFFFFF"
    style.border-radius: 12
    style.font-size: 24
    style.bold: true
    style.shadow: true
  }
  bridge: {
    style.fill: "#FF9500"
    style.font-color: "#FFFFFF" 
    style.border-radius: 12
    style.font-size: 24
    style.bold: true
    style.shadow: true
  }
  cluster: {
    style.fill: "#007AFF"
    style.font-color: "#FFFFFF"
    style.border-radius: 16
    style.font-size: 32
    style.bold: true
    style.shadow: true
  }
  dashboard: {
    style.fill: "#34C759"
    style.font-color: "#FFFFFF"
    style.border-radius: 16
    style.font-size: 32
    style.bold: true
    style.shadow: true
  }
  tool: {
    style.fill: "#FFFFFF"
    style.font-color: "#1D1D1F"
    style.border-radius: 8
    style.font-size: 20
    style.stroke: "#D1D1D6"
    style.stroke-width: 1
  }
}

# 💻 Your Development Environment
laptop_env: {
  label: "💻 Your Laptop"
  class: laptop

  ai_tools: {
    label: "🤖 AI Development Tools"
    class: ai
  }
  
  local_files: {
    label: "📁 Dashboard Code\n(Observable Framework)"
    class: tool
  }
  
  vs_code: {
    label: "⚡ VS Code / IDE"
    class: tool
  }
}

# 🌉 Telepresence Bridge (The Magic)
telepresence: {
  label: "🌉 Telepresence Bridge\n\"Mount Remote as Local\""
  class: bridge
}

# ☸️ Kubernetes Cluster (Production-like)
k8s_cluster: {
  label: "☸️ Kubernetes Cluster"
  class: cluster
  
  observable_pod: {
    label: "📊 Observable Pod\n(Live Data + Processing)"
    class: tool
  }
}

# 🎯 Live Dashboard
live_dashboard: {
  label: "🎯 Live Interactive Dashboard\n\"localhost:3000\""
  class: dashboard
}

# ⚡ The Magic Development Flow
laptop_env.ai_tools -> laptop_env.local_files: "✨ AI writes\ndashboard code" {
  style.stroke: "#5856D6"
  style.stroke-width: 5
  style.font-size: 18
  style.bold: true
}

laptop_env.local_files -> telepresence: "📤 File changes\nsync instantly" {
  style.stroke: "#FF9500"
  style.stroke-width: 5
  style.font-size: 18
  style.bold: true
}

telepresence -> k8s_cluster.observable_pod: "🔄 Live mount\nto K8s pod" {
  style.stroke: "#FF9500"
  style.stroke-width: 5
  style.font-size: 18
  style.bold: true
}

k8s_cluster.observable_pod -> live_dashboard: "🚀 Hot reload\nwith real data" {
  style.stroke: "#34C759"
  style.stroke-width: 5
  style.font-size: 18
  style.bold: true
}

# 🎯 The Result
result_box: {
  label: "🎯 Development Superpowers\n\n✅ Edit locally with Claude Code / Gemini CLI\n✅ Test against live Kubernetes data\n✅ See changes instantly in browser\n✅ No Docker, no local setup hassle\n✅ Production-like development environment"
  class: laptop
  style.fill: "#E8F4FD"
  style.font-size: 16
}

laptop_env -> result_box: "🌟 Experience" {
  style.stroke: "#34C759"
  style.stroke-width: 3
  style.font-size: 12
  style.stroke-dash: 5
}